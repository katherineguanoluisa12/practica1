<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Productos</title>
</head>
<body>
    <h1>Gestión de productos</h1>
    <form id="product-form">
        <input type="text" id="nombre" placeholder="Ingrese el nombre del producto" required>
        <input type="text" id="precio" placeholder="Ingrese el precio del producto" required>
        <input type="text" id="codigo" placeholder="Ingrese el código del producto" required>
        <button type="submit">Agregar producto</button>
    </form>

    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
        import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-analytics.js";
      
        // Your web app's Firebase configuration
        const firebaseConfig = {
          apiKey: "AIzaSyCRdmsLGtJ51YKhucNqJ9U9D5n4HadUlkc",
          authDomain: "proyecto-659ec.firebaseapp.com",
          projectId: "proyecto-659ec",
          storageBucket: "proyecto-659ec.appspot.com",
          messagingSenderId: "529868422369",
          appId: "1:529868422369:web:f326102a25162be32d4ba0",
          measurementId: "G-XSEVMFCXL9"
        };
      
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const db = getFirestore(app);

        // Handle form submission
        document.getElementById('product-form').addEventListener('submit', async (e) => {
            e.preventDefault();

            const nombre = document.getElementById('nombre').value;
            const precio = document.getElementById('precio').value;
            const codigo = document.getElementById('codigo').value;

            try {
                const docRef = await addDoc(collection(db, "productos"), {
                    nombre: nombre,
                    precio: precio,
                    codigo: codigo
                });
                alert('Producto agregado con ID: ' + docRef.id);
            } catch (e) {
                console.error('Error al agregar el producto: ', e);
                alert('Error al agregar el producto');
            }

            // Optionally, clear the form
            document.getElementById('product-form').reset();
        });
    </script>
</body>
</html>
